\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{preambule}[Préambule.]

\usepackage[T1]{fontenc}
\usepackage[french]{babel}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage[landscape, a4paper, left=1cm, top=1cm, right=1cm, bottom=1.7cm]{geometry}
\usepackage{xcolor}
\usepackage{tcolorbox}
\usepackage{enumitem}
\usepackage{ifthen}
\usepackage{graphicx}
\usepackage[hidelinks]{hyperref}
\usepackage{stmaryrd}
\usepackage{mathtools}
\usepackage{csquotes}
\usepackage{colortbl}
\setcounter{MaxMatrixCols}{20}

\usepackage[sorting=none]{biblatex}
\addbibresource{tou.bib}

\setlist[itemize]{itemsep=-1mm, topsep=0pt}
\setlist[enumerate]{itemsep=-1mm, topsep=0pt}
\usepackage{multicol}
\setlength{\columnsep}{1cm}
\usepackage{titleps}
\renewpagestyle{plain}{%
\sethead{}{}{}
\setfoot[\thepage][][]{}{}{\color{blue!50!green}\thepage}
}%
\pagestyle{plain}
\setlength\parindent{0pt}

% les sous-sections
\renewcommand{\thesubsection}{\arabic{subsection}}
\renewcommand{\thesubsubsection}{\thesubsection.\arabic{subsubsection}}

%les environnements : définition, théorème, propriété (bleu vert) / exercice, exemple (bleu vert plus clair)

\newcounter{theoreme}
\newenvironment{theoreme}[1][]{\refstepcounter{theoreme}
\medskip\begin{tcolorbox}[coltitle=black, colframe=blue!50!green!40!white, colback=white, adjusted title=Théorème~\thetheoreme \ifthenelse{\equal{#1}{}}{}{\ (#1)}]}{\end{tcolorbox}\medskip}

\newcounter{defini}
\newenvironment{defini}[1][]{\refstepcounter{defini}
\medskip\begin{tcolorbox}[coltitle=black, colframe=blue!50!green!40!white, colback=white, adjusted title=Définition~\thedefini \ifthenelse{\equal{#1}{}}{}{\ (#1)}]}{\end{tcolorbox}\medskip}

\newcounter{prop}
\newenvironment{prop}[1][]{\refstepcounter{prop}
\medskip\begin{tcolorbox}[coltitle=black, colframe=blue!50!green!20!white, colback=white, adjusted title=Propriété~\theprop \ifthenelse{\equal{#1}{}}{}{\ (#1)}]}{\end{tcolorbox}\medskip}

\newcounter{exo}
\newenvironment{exo}[1][]{\refstepcounter{exo}
\medskip\begin{tcolorbox}[coltitle=black, colframe=blue!50!green!20!white, colback=white, adjusted title=Exercice~\theexo \ifthenelse{\equal{#1}{}}{}{\ (#1)}]}{\end{tcolorbox}\medskip}

\newcounter{ex}
\newenvironment{ex}[1][]{\refstepcounter{ex}
\medskip\begin{tcolorbox}[coltitle=black, colframe=blue!50!green!20!white, colback=white, adjusted title=Exemple~\theex \ifthenelse{\equal{#1}{}}{}{\ (#1)}]}{\end{tcolorbox}\medskip}

\newenvironment{boite}[1]{\medskip\begin{tcolorbox}[coltitle=black, colframe=blue!50!green!20!white, colback=white, adjusted title=#1]}{\end{tcolorbox}\medskip}


\newenvironment{suite}{\addtocounter{prop}{-1}\begin{prop}[Suite]}{\end{prop}}

\newenvironment{appendice}{
    \setcounter{subsubsection}{0}
    \renewcommand{\thesubsubsection}{\thesubsection.\Alph{subsubsection}}
}{
    \renewcommand{\thesubsubsection}{\thesubsection.\arabic{subsubsection}}
}

% le titre
\newcommand{\titre}[2]{
\addcontentsline{toc}{section}{#1}
\setcounter{theoreme}{0}
\setcounter{exo}{0}
\setcounter{ex}{0} 
\setcounter{defini}{0}
\setcounter{prop}{0}
\setcounter{subsection}{0}    
\begin{center}
    \Large \color{blue!50!green} \fbox{\begin{minipage}{13cm}
        \centering #1
    \end{minipage}}
    
    \medskip
    \normalsize \normalcolor #2
\end{center}}

\DeclareMathOperator{\Ima}{Im}
\DeclareMathOperator{\Id}{Id}
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\K}{\mathbb{K}}
\let\ker\relax\DeclareMathOperator{\ker}{Ker}